<h1 id="Platinum_Service_Worker_Elements">Platinum Service Worker Elements</h1><p>A set of Polymer elements that simplify service worker registration and caching, powered by the<br><a href="https://github.com/googlechrome/sw-toolbox"><code>sw-toolbox</code> library</a>.<br>Full documentation is available at <a href="https://PolymerElements.github.io/platinum-sw/index.html">https://PolymerElements.github.io/platinum-sw/index.html</a></p>
<h1 id="Considerations">Considerations</h1><h2 id="Top-level_sw-import-js">Top-level <code>sw-import.js</code></h2><p>While <code>&lt;platinum-sw-register&gt;</code> abstracts away many of the details of working with service workers,<br>there is one specific requirement that developers must fulfill: it needs to register a JavaScript file<br>located at the top-level of your site’s web root. (Details behind this requirement can be found in<br>the service worker specification <a href="https://github.com/slightlyoff/ServiceWorker/issues/468#issuecomment-60276779">issue tracker</a>.)</p>
<p>In order to use <code>&lt;platinum-sw-register&gt;</code>, it’s recommended that you create a <code>sw-import.js</code> file in<br>your site’s web root. The file’s only contents should be</p>
<pre><code>importScripts<span class="list">(<span class="quoted">'bower_components/platinum-sw/service-worker</span>.js')</span><span class="comment">;</span>
</code></pre><p>You can adjust the path to <code>service-worker.js</code> if your project has its Polymer elements<br>installed somewhere other than <code>bower_components/</code>.</p>
<p>If you have multiple subdirectories worth of pages on your site, it’s recommend that you include the<br><code>&lt;platinum-sw-register&gt;</code> element on a top-level entry page that all visitors will access first; once<br>they visit the top-level page and the service worker is registered, it will automatically apply to<br>all sub-pages, which will fall under its<br><a href="https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-registration-scope">scope</a>.</p>
<h2 id="cacheOnly_&amp;_cacheFirst_defaultCacheStrategy_Considered_Harmful"><code>cacheOnly</code> &amp; <code>cacheFirst</code> <code>defaultCacheStrategy</code> Considered Harmful</h2><p>The <a href="https://github.com/googlechrome/sw-toolbox"><code>sw-toolbox</code> library</a>,<br>which <code>&lt;platinum-sw-cache&gt;</code> is built on, supports a number of<br><a href="https://github.com/googlechrome/sw-toolbox#built-in-handlers">caching strategies</a>.<br>Two of them, <code>cacheOnly</code> and <code>cacheFirst</code>, are strongly discouraged to be used as the <code>defaultCacheStrategy</code><br>for <code>&lt;platinum-sw-cache&gt;</code>. With both of those strategies, all HTTP requests, including requests for<br>the page which contains the <code>&lt;platinum-sw-cache&gt;</code> element, are served directly from the <a href="https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#cache-objects">Cache Storage<br>API</a> without<br>first consulting the network for a fresh copy. Once the copy of the host page is cached,<br>it’s extremely difficult to change the configuration of the service worker (since the configuration<br>depends on the page’s contents), and developers could find themselves deploying sites that can never<br>update.</p>
<p>In a future release of <code>&lt;platinum-sw-cache&gt;</code>, using <code>cacheOnly</code> and <code>cacheFirst</code> as <code>defaultCacheStrategy</code><br>may lead to an explicit error condition, but for the meantime, please consider a more reasonable default<br>(like <code>networkFirst</code>).</p>
